<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ultimate Fun Image Presets</title>
<style>
body {
  margin:0;
  font-family: 'Comic Sans MS', sans-serif;
  background: linear-gradient(120deg, #ff9a9e, #fad0c4);
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  min-height:100vh;
}
h1 {
  margin:20px;
  font-size:2em;
  color:#fff;
  text-shadow: 2px 2px 5px #000;
}
#canvasContainer {
  background:#fff;
  padding:10px;
  border-radius:20px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.3);
  margin-bottom:20px;
}
canvas {
  border:5px solid #ff6f91;
  border-radius:15px;
  max-width:90vw;
  max-height:70vh;
}
#controls {
  margin-bottom:30px;
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:15px;
}
button {
  padding:12px 20px;
  font-size:16px;
  font-weight:bold;
  border:none;
  border-radius:12px;
  cursor:pointer;
  color:white;
  transition:all 0.2s;
  box-shadow: 0 5px 10px rgba(0,0,0,0.2);
}
button:hover {
  transform:scale(1.1);
  box-shadow:0 8px 15px rgba(0,0,0,0.3);
}
#uploadBtn { background:#ff6f91; }
#resetBtn { background:#6a4c93; }
.preset { background:#ffa500; }
</style>
</head>
<body>

<h1>ðŸŽ¨ Ultimate Fun Presets</h1>

<input type="file" id="upload" accept="image/*" style="display:none;">
<div id="canvasContainer">
  <canvas id="canvas" width="600" height="400"></canvas>
</div>

<div id="controls">
  <button id="uploadBtn" onclick="document.getElementById('upload').click()">Upload Image</button>
  <button class="preset" onclick="applyPreset('invert')">Invert</button>
  <button class="preset" onclick="applyPreset('pixelate')">Pixelate</button>
  <button class="preset" onclick="applyPreset('swirl')">Swirl</button>
  <button class="preset" onclick="applyPreset('glitch')">Glitch</button>
  <button class="preset" onclick="applyPreset('bulge')">Bulge</button>
  <button class="preset" onclick="applyPreset('rainbow')">Rainbow Tint</button>
  <button class="preset" onclick="applyPreset('sepia')">Sepia</button>
  <button class="preset" onclick="applyPreset('grayscale')">Grayscale</button>
  <button class="preset" onclick="applyPreset('posterize')">Posterize</button>
  <button class="preset" onclick="applyPreset('neon')">Neon Glow</button>
  <button class="preset" onclick="applyPreset('edges')">Edge Detect</button>
  <button class="preset" onclick="applyPreset('rgbsplit')">RGB Split</button>
  <button class="preset" onclick="applyPreset('vhs')">VHS Glitch</button>
  <button class="preset" onclick="applyPreset('solarize')">Solarize</button>
  <button class="preset" onclick="applyPreset('popart')">Pop Art</button>
  <button id="resetBtn" onclick="resetImage()">Reset</button>
</div>

<script>
const canvas=document.getElementById('canvas');
const ctx=canvas.getContext('2d');
let originalImage=null;

document.getElementById('upload').addEventListener('change',e=>{
  const file=e.target.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=function(event){
      const img=new Image();
      img.onload=function(){
        canvas.width=img.width>800?800:img.width;
        canvas.height=img.height>600?600:img.height;
        ctx.drawImage(img,0,0,canvas.width,canvas.height);
        originalImage=ctx.getImageData(0,0,canvas.width,canvas.height);
      }
      img.src=event.target.result;
    }
    reader.readAsDataURL(file);
  }
});

function applyPreset(type){
  if(!originalImage) return;
  const imgData=ctx.createImageData(originalImage);
  imgData.data.set(originalImage.data);
  const data=imgData.data;
  const w=canvas.width,h=canvas.height;

  if(type==='invert'){
    for(let i=0;i<data.length;i+=4){data[i]=255-data[i];data[i+1]=255-data[i+1];data[i+2]=255-data[i+2];}
  }
  else if(type==='pixelate'){
    const size=10;
    for(let y=0;y<h;y+=size){
      for(let x=0;x<w;x+=size){
        const i=(y*w+x)*4;
        const r=data[i],g=data[i+1],b=data[i+2];
        for(let yy=0;yy<size;yy++){
          for(let xx=0;xx<size;xx++){
            const j=((y+yy)*w+(x+xx))*4;
            if(j<data.length){data[j]=r;data[j+1]=g;data[j+2]=b;}
          }
        }
      }
    }
  }
  else if(type==='swirl'){
    const cx=w/2,cy=h/2;
    const newData=new Uint8ClampedArray(data.length);
    for(let y=0;y<h;y++){
      for(let x=0;x<w;x++){
        const dx=x-cx,dy=y-cy;
        const r=Math.sqrt(dx*dx+dy*dy);
        const angle=Math.atan2(dy,dx)+0.05*r;
        const sx=Math.floor(cx+r*Math.cos(angle));
        const sy=Math.floor(cy+r*Math.sin(angle));
        const dest=(y*w+x)*4;
        if(sx>=0 && sx<w && sy>=0 && sy<h){
          const src=(sy*w+sx)*4;
          newData[dest]=data[src];
          newData[dest+1]=data[src+1];
          newData[dest+2]=data[src+2];
          newData[dest+3]=data[src+3];
        }
      }
    }
    imgData.data.set(newData);
  }
  else if(type==='glitch'){
    for(let i=0;i<data.length;i+=4){
      data[i]=data[i+4]||data[i];
      data[i+1]=data[i+8]||data[i+1];
      data[i+2]=data[i+12]||data[i+2];
    }
  }
  else if(type==='bulge'){
    const cx=w/2,cy=h/2,newData=new Uint8ClampedArray(data.length);
    for(let y=0;y<h;y++){
      for(let x=0;x<w;x++){
        const dx=(x-cx)/w*2,dy=(y-cy)/h*2;
        const r=Math.sqrt(dx*dx+dy*dy);
        const factor=1/(r+0.5);
        const sx=Math.min(w-1,Math.max(0,Math.floor(cx+dx*factor*w/2)));
        const sy=Math.min(h-1,Math.max(0,Math.floor(cy+dy*factor*h/2)));
        const dest=(y*w+x)*4,src=(sy*w+sx)*4;
        newData[dest]=data[src];newData[dest+1]=data[src+1];newData[dest+2]=data[src+2];newData[dest+3]=data[src+3];
      }
    }
    imgData.data.set(newData);
  }
  else if(type==='rainbow'){
    for(let i=0;i<data.length;i+=4){
      data[i]=data[i]+Math.sin(i/100)*100;
      data[i+1]=data[i+1]+Math.sin(i/50)*100;
      data[i+2]=data[i+2]+Math.sin(i/25)*100;
    }
  }
  else if(type==='sepia'){
    for(let i=0;i<data.length;i+=4){
      let r=data[i],g=data[i+1],b=data[i+2];
      data[i]=Math.min(255,(r*0.393+g*0.769+b*0.189));
      data[i+1]=Math.min(255,(r*0.349+g*0.686+b*0.168));
      data[i+2]=Math.min(255,(r*0.272+g*0.534+b*0.131));
    }
  }
  else if(type==='grayscale'){
    for(let i=0;i<data.length;i+=4){
      let v=(data[i]+data[i+1]+data[i+2])/3;
      data[i]=data[i+1]=data[i+2]=v;
    }
  }
  else if(type==='posterize'){
    for(let i=0;i<data.length;i+=4){
      data[i]=Math.floor(data[i]/64)*64;
      data[i+1]=Math.floor(data[i+1]/64)*64;
      data[i+2]=Math.floor(data[i+2]/64)*64;
    }
  }
  else if(type==='neon'){
    for(let i=0;i<data.length;i+=4){
      data[i]=255-data[i];
      data[i+1]=data[i+1]/2;
      data[i+2]=255-data[i+2];
    }
  }
  else if(type==='edges'){
    for(let i=0;i<data.length;i+=4){
      const avg=(data[i]+data[i+1]+data[i+2])/3;
      const val=avg>128?255:0;
      data[i]=data[i+1]=data[i+2]=val;
    }
  }
  else if(type==='rgbsplit'){
    for(let i=0;i<data.length;i+=4){
      data[i]=data[i+4]||data[i];
      data[i+1]=data[i+8]||data[i+1];
      data[i+2]=data[i+12]||data[i+2];
    }
  }
  else if(type==='vhs'){
    for(let y=0;y<h;y++){
      for(let x=0;x<w;x++){
        const i=(y*w+x)*4;
        if(Math.random()<0.02){data[i]=0;data[i+1]=255;data[i+2]=0;}
      }
    }
  }
  else if(type==='solarize'){
    for(let i=0;i<data.length;i+=4){
      if(data[i]>128)data[i]=255-data[i];
      if(data[i+1]>128)data[i+1]=255-data[i+1];
      if(data[i+2]>128)data[i+2]=255-data[i+2];
    }
  }
  else if(type==='popart'){
    for(let i=0;i<data.length;i+=4){
      data[i]=255-data[i]; data[i+1]=data[i+1]/2; data[i+2]=Math.min(255,data[i+2]+100);
    }
  }

  ctx.putImageData(imgData,0,0);
}

function resetImage(){
  if(originalImage){
    ctx.putImageData(originalImage,0,0);
  }
}
</script>

</body>
</html>
