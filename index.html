<!DOCTYPE html>
<html lang="da">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Hotline HTML Game</title>
  <style>
    html,body {
      margin:0;
      height:100%;
      background:#0b0b0f;
      color:white;
      font-family:Arial, sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    canvas {
      background:#101015;
      display:block;
      border:2px solid #222;
    }
    #menu {
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      display:flex;
      align-items:center;
      justify-content:center;
      background:rgba(0,0,0,0.6);
      flex-direction:column;
      z-index:5;
    }
    #menu h1 { color:#ff2d95; margin-bottom:8px; }
    #menu p { color:#ccc; margin-bottom:20px; max-width:300px; text-align:center; }
    #menu button {
      background:none;
      border:2px solid #fff;
      color:white;
      padding:10px 20px;
      font-size:16px;
      cursor:pointer;
      border-radius:8px;
      transition:0.2s;
    }
    #menu button:hover { background:rgba(255,255,255,0.2); }
  </style>
</head>
<body>
  <canvas id="game" width="800" height="600"></canvas>
  <div id="menu">
    <h1>Hotline-ish</h1>
    <p>WASD til at bev√¶ge dig, mus til at sigte, klik for at skyde.</p>
    <button id="startBtn">Start spil</button>
  </div>

<script>
window.onload = function() {
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");
  const menu = document.getElementById("menu");
  const startBtn = document.getElementById("startBtn");

  let keys = {}, mouse = {x:0,y:0,down:false};
  let player, bullets, enemies, gameRunning=false;

  function initGame(){
    gameRunning = true;
    menu.style.display = "none";
    player = {x:400,y:300,r:12,speed:3,color:"#ff2d95",hp:100};
    bullets = [];
    enemies = [];
    for(let i=0;i<5;i++) spawnEnemy();
  }

  function spawnEnemy(){
    enemies.push({
      x:Math.random()*800,
      y:Math.random()*600,
      r:12,
      color:"#00e6ff",
      hp:60
    });
  }

  function shoot(){
    const a=Math.atan2(mouse.y-player.y,mouse.x-player.x);
    bullets.push({
      x:player.x,
      y:player.y,
      vx:Math.cos(a)*6,
      vy:Math.sin(a)*6,
      life:100
    });
  }

  window.addEventListener("keydown",e=>keys[e.key.toLowerCase()]=true);
  window.addEventListener("keyup",e=>keys[e.key.toLowerCase()]=false);
  canvas.addEventListener("mousemove",e=>{
    const r=canvas.getBoundingClientRect();
    mouse.x=e.clientX-r.left;
    mouse.y=e.clientY-r.top;
  });
  canvas.addEventListener("mousedown",()=>{mouse.down=true;shoot();});
  window.addEventListener("mouseup",()=>mouse.down=false);

  function update(){
    if(!gameRunning)return;

    let dx=0,dy=0;
    if(keys["w"])dy-=1;
    if(keys["s"])dy+=1;
    if(keys["a"])dx-=1;
    if(keys["d"])dx+=1;
    if(dx||dy){
      const m=Math.hypot(dx,dy);
      dx/=m; dy/=m;
      player.x+=dx*player.speed;
      player.y+=dy*player.speed;
    }

    for(let b of bullets){
      b.x+=b.vx;
      b.y+=b.vy;
      b.life--;
    }
    bullets = bullets.filter(b=>b.life>0);

    for(let e of enemies){
      const a=Math.atan2(player.y-e.y,player.x-e.x);
      e.x+=Math.cos(a)*1.5;
      e.y+=Math.sin(a)*1.5;
    }
  }

  function draw(){
    ctx.fillStyle="#101015";
    ctx.fillRect(0,0,800,600);
    // player
    ctx.fillStyle=player.color;
    ctx.beginPath();
    ctx.arc(player.x,player.y,player.r,0,Math.PI*2);
    ctx.fill();
    // bullets
    ctx.fillStyle="#ffd966";
    for(let b of bullets){
      ctx.beginPath();
      ctx.arc(b.x,b.y,3,0,Math.PI*2);
      ctx.fill();
    }
    // enemies
    ctx.fillStyle="#00e6ff";
    for(let e of enemies){
      ctx.beginPath();
      ctx.arc(e.x,e.y,e.r,0,Math.PI*2);
      ctx.fill();
    }
  }

  function loop(){
    if(gameRunning){update();draw();}
    requestAnimationFrame(loop);
  }

  startBtn.addEventListener("click",()=>{initGame();});
  loop();
}
</script>
</body>
</html>
